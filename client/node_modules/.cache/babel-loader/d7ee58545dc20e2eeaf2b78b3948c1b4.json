{"ast":null,"code":"var _jsxFileName = \"/Users/joonyounglee/MITHACK/MITHack2020/client/src/Pages/Home.js\";\nimport React, { useState, useEffect } from 'react';\nimport FeedCard from \"../Components/FeedCard\";\nimport NavBar from \"../Components/NavBar\";\nimport { Card, Icon, Grid, Segment, Button, Container } from 'semantic-ui-react';\nimport GroupsCard from \"../Components/GroupsCard\";\nimport ProfileCard from \"../Components/ProfileCard\";\nimport NewPost from \"../Components/NewPost\";\nimport SuggestedGroups from '../Components/SuggestedGroups';\nimport { Nav } from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport GroupPosts from \"../APIComponents/GroupPosts\";\nimport UserGroups from \"../APIComponents/UserGroups\";\nimport UserInfo from \"../APIComponents/UserInfo\";\nimport ProfileInfo from \"../APIComponents/ProfileInfo\";\nimport GroupSuggestions from \"../APIComponents/GroupSuggestions\";\nimport InterestPosts from \"../APIComponents/InterestPosts\";\nimport SpecificPosts from \"../APIComponents/SpecificPosts\";\nimport Posts from \"../Components/Posts\";\nimport ParseAllPosts from \"../APIComponents/ParseAllPosts\";\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nfunction postReducer(state, action) {\n  switch (action.type) {\n    case 'OPEN_MODAL':\n      return {\n        showpost: true,\n        dimmer: action.dimmer\n      };\n\n    case 'CLOSE_MODAL':\n      return {\n        showpost: false\n      };\n\n    default:\n      throw new Error();\n  }\n}\n\nconst Home = props => {\n  const [explore, setExplore] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [explorePosts, setExplorePosts] = useState([]);\n  const [state, handlePost] = React.useReducer(postReducer, {\n    showpost: false,\n    dimmer: undefined\n  });\n\n  function handlePostChange(state) {\n    handlePost(state);\n  }\n\n  const [match_state, handleMatchPost] = React.useReducer(postReducer, {\n    showpost: false,\n    dimmer: undefined\n  });\n\n  function handleMatchPostChange(state) {\n    handleMatchPost(state);\n  }\n\n  const [user, setUser] = useState({});\n  const [profile, setProfile] = useState({});\n  const [groups, setGroups] = useState([]);\n  const [suggestions, setSuggestions] = useState([]); // group suggestions \n\n  const user_id = localStorage.getItem('user_id');\n  const limit = 10; // limit on # posts \n\n  useEffect(() => {\n    getPosts(user_id, limit);\n    getExplorePosts(user_id, limit);\n    getGroups(user_id);\n    getUser(user_id);\n    getProfile(user_id);\n    getSuggestions(user_id);\n  }, {});\n\n  async function getSuggestions(user_id) {\n    let suggestions = GroupSuggestions(user_id);\n    suggestions.then(data => {\n      setSuggestions(data);\n    });\n  }\n\n  const handleToggle = event => {\n    setExplore(!explore);\n  }; // async function getPosts(user_id) {\n  //   await getGroups(user_id);\n  //   let arr = Array(); \n  //   for (let idx in groups) {\n  //     let group = groups[idx];\n  //     let data = await GroupPosts(group.id);\n  //     data.then(info => {\n  //       arr.push(info);\n  //     })\n  //   }\n  //   setPosts(arr);\n  // }\n\n\n  async function getPosts(user_id, limit) {\n    let posts = await SpecificPosts(user_id, limit);\n    await ParseAllPosts(posts, setPosts);\n  }\n\n  async function getExplorePosts(user_id, limit) {\n    let posts = await InterestPosts(user_id, limit);\n    await ParseAllPosts(posts, setExplorePosts);\n  }\n\n  async function getGroups(user_id) {\n    let groups = UserGroups(user_id);\n    groups.then(data => {\n      setGroups(data);\n    });\n  }\n\n  async function getUser(user_id) {\n    let user = UserInfo(user_id);\n    user.then(data => {\n      setUser(data);\n    });\n  }\n\n  ;\n\n  async function getProfile(user_id) {\n    let profile = ProfileInfo(user_id);\n    profile.then(data => {\n      setProfile(data);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(NavBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    centered: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(LinkContainer, {\n    to: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ProfileCard, {\n    className: \"profCard\",\n    name: user.first_name + \" \" + user.last_name,\n    src: profile.image,\n    inspired: profile.total_matches,\n    matched: profile.ind_matches,\n    groups: groups,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(GroupsCard, {\n    name: props.name,\n    src: props.src,\n    inspired: props.inspired,\n    matched: props.matched,\n    groups: groups,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    centered: true,\n    width: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(NewPost, {\n    name: user.first_name + \" \" + user.last_name,\n    profile: profile,\n    match_state: match_state,\n    state: state,\n    handlePostChange: handlePostChange,\n    handleMatchPostChange: handleMatchPostChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    style: {\n      margin: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    toggle: true,\n    active: explore,\n    onClick: handleToggle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, \"Filtering\")), /*#__PURE__*/React.createElement(Posts, {\n    posts: explore ? posts : explorePosts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(SuggestedGroups, {\n    groups: suggestions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  })))));\n};\n\nexport default Home; // const [posts, setPosts] = useState([]);\n// const [matches, setMatches] = useState([]); \n// useEffect(() => {\n//     postFetch({ limit:10 });\n// }, []);    \n// async function setterPosts(data) {\n//     data = await ParsePosts(data);\n//     let posts = data.filter(post => post.isMatch === false);\n//     let matches = data.filter(post => post.isMatch === true);\n//     setPosts(posts);\n//     setMatches(matches);\n// }\n// async function postFetch(pagination) {\n//     try {\n//         var limit = pagination.limit; \n//         var id = localStorage.getItem(\"user_id\");\n//         const response = await axiosInstance.get('api/posts/interests/' + id.toString() + \"/\" + limit.toString() + \"/\");\n//         const data = response.data;\n//         await setterPosts(data);\n//         return response.data; \n//     } catch (error) {\n//         console.log(error);\n//     }\n// };","map":{"version":3,"sources":["/Users/joonyounglee/MITHACK/MITHack2020/client/src/Pages/Home.js"],"names":["React","useState","useEffect","FeedCard","NavBar","Card","Icon","Grid","Segment","Button","Container","GroupsCard","ProfileCard","NewPost","SuggestedGroups","Nav","LinkContainer","GroupPosts","UserGroups","UserInfo","ProfileInfo","GroupSuggestions","InterestPosts","SpecificPosts","Posts","ParseAllPosts","Switch","FormControlLabel","postReducer","state","action","type","showpost","dimmer","Error","Home","props","explore","setExplore","posts","setPosts","explorePosts","setExplorePosts","handlePost","useReducer","undefined","handlePostChange","match_state","handleMatchPost","handleMatchPostChange","user","setUser","profile","setProfile","groups","setGroups","suggestions","setSuggestions","user_id","localStorage","getItem","limit","getPosts","getExplorePosts","getGroups","getUser","getProfile","getSuggestions","then","data","handleToggle","event","first_name","last_name","image","total_matches","ind_matches","name","src","inspired","matched","margin"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport FeedCard from \"../Components/FeedCard\";\nimport NavBar from \"../Components/NavBar\";\nimport { Card, Icon, Grid, Segment, Button, Container} from 'semantic-ui-react'\nimport GroupsCard from \"../Components/GroupsCard\";\nimport ProfileCard from \"../Components/ProfileCard\"\nimport NewPost from \"../Components/NewPost\";\nimport SuggestedGroups from '../Components/SuggestedGroups';\nimport {Nav} from \"react-bootstrap\";\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport GroupPosts from \"../APIComponents/GroupPosts\";\nimport UserGroups from \"../APIComponents/UserGroups\";\nimport UserInfo from \"../APIComponents/UserInfo\";\nimport ProfileInfo from \"../APIComponents/ProfileInfo\";\nimport GroupSuggestions from \"../APIComponents/GroupSuggestions\";\nimport InterestPosts from \"../APIComponents/InterestPosts\";\nimport SpecificPosts from \"../APIComponents/SpecificPosts\";\nimport Posts from \"../Components/Posts\";\nimport ParseAllPosts from \"../APIComponents/ParseAllPosts\";\nimport Switch from '@material-ui/core/Switch';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nfunction postReducer(state, action) {\n  switch (action.type) {\n    case 'OPEN_MODAL' :\n      return { showpost: true, dimmer: action.dimmer }\n    case 'CLOSE_MODAL' : \n      return { showpost: false }\n    default: \n      throw new Error(); \n  }\n}\n\n\nconst Home = (props) => {\n\n  const [explore, setExplore] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [explorePosts, setExplorePosts] = useState([]);\n\n  const [state, handlePost] = React.useReducer(postReducer, {\n    showpost: false, \n    dimmer: undefined,\n  })\n\n  function handlePostChange(state) {\n    handlePost(state);\n  }\n\n  const [match_state, handleMatchPost] = React.useReducer(postReducer, {\n    showpost: false, \n    dimmer: undefined, \n  })\n\n  function handleMatchPostChange(state) {\n    handleMatchPost(state);\n  }\n\n\n  const [user, setUser] = useState({});\n  const [profile, setProfile] = useState({});\n  const [groups, setGroups] = useState([]);\n  const [suggestions, setSuggestions] = useState([]); // group suggestions \n\n  const user_id = localStorage.getItem('user_id');\n\n  const limit = 10; // limit on # posts \n\n  useEffect(() => {\n      getPosts(user_id, limit);\n      getExplorePosts(user_id, limit);\n      getGroups(user_id);\n      getUser(user_id);\n      getProfile(user_id);\n      getSuggestions(user_id);\n  }, {});\n\n  async function getSuggestions(user_id) {\n    let suggestions = GroupSuggestions(user_id);\n    suggestions.then(data => {\n      setSuggestions(data);\n    })\n\n  }\n\n  const handleToggle = (event) => {\n    setExplore(!explore);\n  }\n\n  // async function getPosts(user_id) {\n  //   await getGroups(user_id);\n\n  //   let arr = Array(); \n\n  //   for (let idx in groups) {\n  //     let group = groups[idx];\n\n  //     let data = await GroupPosts(group.id);\n  //     data.then(info => {\n  //       arr.push(info);\n  //     })\n  //   }\n\n  //   setPosts(arr);\n  // }\n\n  async function getPosts(user_id, limit) {\n    let posts = await SpecificPosts(user_id, limit);\n    await ParseAllPosts(posts, setPosts); \n  }\n\n  async function getExplorePosts(user_id, limit) {\n    let posts = await InterestPosts(user_id, limit);\n    await ParseAllPosts(posts, setExplorePosts);\n    }\n  \n\n  async function getGroups(user_id) {\n    let groups = UserGroups(user_id);\n    groups.then(data => {\n      setGroups(data);\n    })\n  }\n\n  async function getUser(user_id) {\n    let user = UserInfo(user_id);\n\n    user.then(data => {\n      setUser(data);\n    })\n  };\n\n  async function getProfile(user_id) {\n    let profile = ProfileInfo(user_id);\n\n    profile.then(data => {\n      setProfile(data);\n    })\n  }\n\n    return (\n      <div>\n          <NavBar />\n\n          <Grid centered>\n            <Grid.Row>\n                <Grid.Column width={3} >\n                  <LinkContainer to=\"/profile\">\n\n                      <ProfileCard className=\"profCard\" name={user.first_name + \" \" + user.last_name} src={profile.image} \n                      inspired={profile.total_matches} matched={profile.ind_matches} \n                      groups={groups} />\n\n\n                    </LinkContainer>\n\n                    <GroupsCard name={props.name} src={props.src} inspired={props.inspired} matched={props.matched} groups={groups}/>\n\n                </Grid.Column>\n\n\n\n                  <Grid.Column centered width={6}>\n\n                    <NewPost name = {user.first_name + \" \" + user.last_name} profile = {profile} match_state = {match_state} state={ state } handlePostChange={handlePostChange} handleMatchPostChange={handleMatchPostChange} />\n\n                  {/* <FormControlLabel \n                    control={\n                      <Switch\n                      checked = {explore}\n                      onChange = {handleToggle}\n                      name=\"toggle\"\n                      color=\"Primary\"\n                    />\n                    }\n                    label=\"See All\"\n                  /> */}\n                <Container style={{margin: \"10px\"}}>\n                  <Button toggle active={explore} onClick = {handleToggle}>\n                      Filtering\n                    </Button>\n                </Container>\n\n\n                    <Posts posts={explore ? posts : explorePosts} />\n\n                    {/* <FeedCard description={description} likes={8}/> */}\n\n\n\n                  </Grid.Column>\n\n\n                  <Grid.Column width={3}>\n\n                    <SuggestedGroups groups={suggestions}/>\n\n\n\n                  </Grid.Column>\n\n              </Grid.Row>\n\n          </Grid>\n\n      </div>\n\n    );\n}\n\nexport default Home;\n\n\n// const [posts, setPosts] = useState([]);\n// const [matches, setMatches] = useState([]); \n\n// useEffect(() => {\n//     postFetch({ limit:10 });\n// }, []);    \n\n// async function setterPosts(data) {\n//     data = await ParsePosts(data);\n\n//     let posts = data.filter(post => post.isMatch === false);\n//     let matches = data.filter(post => post.isMatch === true);\n\n//     setPosts(posts);\n//     setMatches(matches);\n// }\n\n// async function postFetch(pagination) {\n//     try {\n//         var limit = pagination.limit; \n//         var id = localStorage.getItem(\"user_id\");\n//         const response = await axiosInstance.get('api/posts/interests/' + id.toString() + \"/\" + limit.toString() + \"/\");\n        \n//         const data = response.data;\n\n//         await setterPosts(data);\n\n//         return response.data; \n//     } catch (error) {\n//         console.log(error);\n//     }\n// };\n"]},"metadata":{},"sourceType":"module"}