{"ast":null,"code":"var _jsxFileName = \"/Users/joonyounglee/MITHACK/MITHack2020/client/src/Components/NavBar.js\";\nimport React, { Component, useState } from 'react';\nimport { Navbar, Button, Nav } from 'react-bootstrap';\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Icon, Search } from 'semantic-ui-react';\nimport { BiPaperPlane } from \"react-icons/bi\";\nimport { FaUserAlt } from \"react-icons/fa\";\nimport { TiHome } from \"react-icons/ti\";\nimport { FaHandsHelping } from \"react-icons/fa\";\nimport axiosInstance from \"../User/axiosApi\";\nimport SearchResults from \"../APIComponents/SearchResults\";\nimport _ from \"lodash\";\nimport DropDown from \"./DropDown\";\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search';\nimport { fade, makeStyles } from '@material-ui/core/styles';\nimport AllGroups from \"../APIComponents/AllGroups\";\nimport AllThemes from \"../APIComponents/AllThemes\";\nconst initialState = {\n  loading: false,\n  results: [],\n  value: ''\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25)\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(1),\n      width: 'auto'\n    }\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: 'white'\n  },\n  inputRoot: {\n    color: 'white'\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: '12ch',\n      '&:focus': {\n        width: '20ch'\n      }\n    }\n  }\n}));\n\nfunction searchReducer(state, action) {\n  switch (action.type) {\n    case \"CLEAN_QUERY\":\n      return initialState;\n\n    case \"START_SEARCH\":\n      return { ...state,\n        loading: true,\n        value: action.query\n      };\n\n    case \"FINISH_SEARCH\":\n      return { ...state,\n        loading: false,\n        results: action.results\n      };\n\n    case \"UPDATE_SELECTION\":\n      return { ...state,\n        value: action.selection\n      };\n\n    default:\n      throw new Error();\n  }\n}\n\nlet source = getSearchResults();\n\nasync function getSearchResults() {\n  let results = await SearchResults();\n  source = results;\n}\n\nconst NavBar = props => {\n  const classes = useStyles(); // const [source, setSource] = React.useState([]);\n\n  const [state, setState] = React.useReducer(searchReducer, initialState);\n  const {\n    loading,\n    results,\n    value\n  } = state; // async function getSearchResults() {\n  //   let results = await SearchResults(); \n  //   return results; \n  //  }\n\n  async function handleLogout() {\n    try {\n      const response = await axiosInstance.post('logout/', {\n        \"refresh_token\": localStorage.getItem(\"refresh_token\")\n      });\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"refresh_token\");\n      axiosInstance.defaults.headers['Authorization'] = null;\n      return response;\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  const timeoutRef = React.useRef();\n  const handleSearchChange = React.useCallback((e, data) => {\n    clearTimeout(timeoutRef.current);\n    setState({\n      type: 'START_SEARCH',\n      query: data.value\n    });\n    timeoutRef.current = setTimeout(() => {\n      if (data.value.length === 0) {\n        setState({\n          type: 'CLEAN_QUERY'\n        });\n        return;\n      }\n\n      const re = new RegExp(_.escapeRegExp(data.value), 'i');\n\n      const isMatch = result => re.test(result.title);\n\n      console.log(source);\n      setState({\n        type: 'FINISH_SEARCH',\n        results: _.filter(source, isMatch)\n      });\n    }, 300);\n  }, []);\n\n  async function getGroups() {\n    let results = await AllGroups();\n    return results;\n  }\n\n  const [all_themes, setAllThemes] = useState([]);\n  const [all_groups, setAllGroups] = useState([]);\n\n  async function getThemes() {\n    let results = await AllThemes();\n    return results;\n  }\n\n  async function parseThemes(themes) {\n    let arr = Array();\n\n    for (let idx in themes) {\n      arr.push({\n        key: themes[idx],\n        text: themes[idx],\n        value: themes[idx],\n        href: '/theme/' + themes[idx]\n      });\n    }\n\n    setAllThemes(arr);\n  }\n\n  async function parseOptions(groups) {\n    let arr = Array();\n\n    for (let idx in groups) {\n      arr.push({\n        key: groups[idx].name,\n        text: groups[idx].name,\n        value: groups[idx].name,\n        image: {\n          avatar: true,\n          src: groups[idx].image\n        },\n        href: '/group/' + groups[idx].id.toString()\n      });\n    }\n\n    setAllGroups(arr);\n  }\n\n  React.useEffect(() => {\n    // let result = getSearchResults(); \n    // result.then((result) => {\n    //   setSource(result);\n    //   console.log(result);\n    // })\n    let data = getGroups();\n    data.then(data => {\n      parseOptions(data);\n    });\n    let data2 = getThemes();\n    data2.then(data => {\n      parseThemes(data);\n    }); // return () => {\n    //   clearTimeout(timeoutRef.current)\n    // }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    bg: \"primary\",\n    variant: \"dark\",\n    fixed: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(FaHandsHelping, {\n    size: 30,\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(LinkContainer, {\n    to: \"/feed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar.Brand, {\n    href: \"#home\",\n    style: {\n      fontSize: 23\n    },\n    className: \"pr-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }, \"MatchMe\"))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginRight: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DropDown, {\n    options: all_groups,\n    text: 'Groups',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginRight: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, console.log(all_themes), /*#__PURE__*/React.createElement(DropDown, {\n    options: all_themes,\n    text: 'Tags',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: 500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.search,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.searchIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SearchIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(InputBase, {\n    placeholder: \"Search...\",\n    classes: {\n      root: classes.inputRoot,\n      input: classes.inputInput\n    },\n    inputProps: {\n      'aria-label': 'search',\n      color: 'white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(Nav, {\n    className: \"ml-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LinkContainer, {\n    to: \"/feed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginBottom: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TiHome, {\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }\n  })), \"Home\")), /*#__PURE__*/React.createElement(LinkContainer, {\n    to: \"/feed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginBottom: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BiPaperPlane, {\n    size: 25,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }\n  })), \"Message\")), /*#__PURE__*/React.createElement(LinkContainer, {\n    to: \"/profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Nav.Link, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\",\n      marginBottom: 2\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FaUserAlt, {\n    style: {\n      fontSize: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 11\n    }\n  })), \"Profile\")))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingTop: 120\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 5\n    }\n  }));\n};\n\n{\n  /* <button onClick={this.handleLogout}>Logout</button> */\n}\nexport default NavBar;","map":{"version":3,"sources":["/Users/joonyounglee/MITHACK/MITHack2020/client/src/Components/NavBar.js"],"names":["React","Component","useState","Navbar","Button","Nav","LinkContainer","Icon","Search","BiPaperPlane","FaUserAlt","TiHome","FaHandsHelping","axiosInstance","SearchResults","_","DropDown","InputBase","SearchIcon","fade","makeStyles","AllGroups","AllThemes","initialState","loading","results","value","useStyles","theme","root","flexGrow","search","position","borderRadius","shape","backgroundColor","palette","common","white","marginLeft","width","breakpoints","up","spacing","searchIcon","padding","height","pointerEvents","display","alignItems","justifyContent","color","inputRoot","inputInput","paddingLeft","transition","transitions","create","searchReducer","state","action","type","query","selection","Error","source","getSearchResults","NavBar","props","classes","setState","useReducer","handleLogout","response","post","localStorage","getItem","removeItem","defaults","headers","e","console","log","timeoutRef","useRef","handleSearchChange","useCallback","data","clearTimeout","current","setTimeout","length","re","RegExp","escapeRegExp","isMatch","result","test","title","filter","getGroups","all_themes","setAllThemes","all_groups","setAllGroups","getThemes","parseThemes","themes","arr","Array","idx","push","key","text","href","parseOptions","groups","name","image","avatar","src","id","toString","useEffect","then","data2","fontSize","marginRight","input","textAlign","marginBottom","paddingTop"],"mappings":"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","sourcesContent":["import React, {Component, useState} from 'react'\nimport {Navbar, Button, Nav,} from 'react-bootstrap';\nimport { LinkContainer } from \"react-router-bootstrap\";\nimport { Icon, Search} from 'semantic-ui-react'\nimport {BiPaperPlane} from \"react-icons/bi\"\nimport {FaUserAlt} from \"react-icons/fa\"\nimport {TiHome} from \"react-icons/ti\"\nimport {FaHandsHelping} from \"react-icons/fa\"\nimport axiosInstance from \"../User/axiosApi\";\nimport SearchResults from \"../APIComponents/SearchResults\";\nimport _ from \"lodash\";\nimport DropDown from \"./DropDown\";\nimport InputBase from '@material-ui/core/InputBase';\nimport SearchIcon from '@material-ui/icons/Search'\nimport { fade, makeStyles } from '@material-ui/core/styles'\nimport AllGroups from \"../APIComponents/AllGroups\";\nimport AllThemes from \"../APIComponents/AllThemes\";\n\nconst initialState = {\n  loading: false, \n  results: [], \n  value: '',\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(1),\n      width: 'auto',\n    },\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    color: 'white'\n  },\n  inputRoot: {\n    color: 'white',\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: '12ch',\n      '&:focus': {\n        width: '20ch',\n      },\n    },\n  },\n}));\n\n\n\nfunction searchReducer(state, action) {\n  switch (action.type) {\n    case \"CLEAN_QUERY\":\n      return initialState \n    case \"START_SEARCH\":\n      return { ...state, loading: true, value: action.query}\n    case \"FINISH_SEARCH\":\n      return { ...state, loading: false, results: action.results }\n    case \"UPDATE_SELECTION\":\n      return { ...state, value: action.selection }\n    \n    default: \n      throw new Error() \n  }\n}\n\nlet source = getSearchResults(); \n\nasync function getSearchResults() {\n  let results = await SearchResults();\n  source = results; \n}\n\nconst NavBar = (props) => {\n  const classes = useStyles();\n  // const [source, setSource] = React.useState([]);\n  const [state, setState] = React.useReducer(searchReducer, initialState)\n  const { loading, results, value } = state \n\n  // async function getSearchResults() {\n\n  //   let results = await SearchResults(); \n\n  //   return results; \n  //  }\n\n  async function handleLogout() {\n    try {\n      const response = await axiosInstance.post('logout/', {\n        \"refresh_token\": localStorage.getItem(\"refresh_token\")\n      });\n      localStorage.removeItem(\"access_token\");\n      localStorage.removeItem(\"refresh_token\");\n      axiosInstance.defaults.headers['Authorization'] = null; \n      return response; \n    }\n    catch (e) {\n      console.log(e);\n    }\n  }\n\n  const timeoutRef = React.useRef()\n  const handleSearchChange = React.useCallback((e, data) => {\n    clearTimeout(timeoutRef.current)\n    setState({ type: 'START_SEARCH', query: data.value })\n\n    timeoutRef.current = setTimeout(() => {\n      if (data.value.length === 0) {\n        setState({ type: 'CLEAN_QUERY' })\n        return\n      }\n\n      const re = new RegExp(_.escapeRegExp(data.value), 'i')\n      const isMatch = (result) => re.test(result.title)\n\n      console.log(source);\n\n      setState({\n        type: 'FINISH_SEARCH',\n        results: _.filter(source, isMatch)\n      })\n\n    }, 300)\n  }, [])\n\n  async function getGroups() {\n    let results = await AllGroups(); \n    return results; \n  }\n\n\n  const [all_themes, setAllThemes] = useState([]);\n\n  const [all_groups, setAllGroups] = useState([]);\n\n  async function getThemes() {\n    let results = await AllThemes(); \n    return results; \n  }\n\n  async function parseThemes(themes) {\n    let arr = Array();\n    for (let idx in themes) {\n      arr.push({\n        key: themes[idx],\n        text: themes[idx],\n        value: themes[idx],\n        href: '/theme/' + themes[idx],\n      })\n    }\n    setAllThemes(arr);  \n  }\n\n  async function parseOptions(groups) {\n    let arr = Array();\n    for (let idx in groups) {\n      arr.push({\n        key: groups[idx].name,\n        text: groups[idx].name,\n        value: groups[idx].name,\n        image: {avatar:true, src: groups[idx].image},\n        href: '/group/' + groups[idx].id.toString(),\n      })\n    }\n    setAllGroups(arr);\n  }\n\n\n  React.useEffect(() => {\n    // let result = getSearchResults(); \n    // result.then((result) => {\n    //   setSource(result);\n    //   console.log(result);\n    // })\n    let data = getGroups();\n    data.then((data) => {\n      parseOptions(data)\n    })\n    let data2 = getThemes();\n    data2.then((data) => {\n      parseThemes(data); \n    })\n    // return () => {\n    //   clearTimeout(timeoutRef.current)\n    // }\n\n  }, []);\n\n  return (\n    <div>\n    <Navbar bg=\"primary\" variant=\"dark\" fixed=\"top\">\n    <div style={{marginLeft: 10}}>\n        <FaHandsHelping size={30} color=\"white\"/>\n      </div>\n    <LinkContainer to=\"/feed\" >\n    <Nav.Link >\n      <Navbar.Brand href=\"#home\" style={{fontSize: 23}}className=\"pr-2\">MatchMe</Navbar.Brand>\n      </Nav.Link >\n    </LinkContainer>\n      <div style={{marginRight: 20}}>\n\n      <DropDown options={all_groups} text={'Groups'} />\n\n      </div>\n\n      <div style={{marginRight: 20}}>\n\n    {console.log(all_themes)}\n      <DropDown options={all_themes} text={'Tags'} />\n\n      </div>\n\n      <div style={{width: 500}}>\n      <div className={classes.search}>\n        <div className={classes.searchIcon}>\n          <SearchIcon />\n        </div>\n        <InputBase\n          placeholder=\"Search...\"\n          classes={{\n            root: classes.inputRoot,\n            input: classes.inputInput,\n          }}\n          inputProps={{ 'aria-label': 'search', color: 'white'}}\n        />\n      </div>\n\n\n      </div>\n      {/* <Input icon='search' placeholder='Search...' /> */}\n\n      {/* <Search\n        loading = {loading}\n        onResultSelect={(e, data) => {\n          setState({ type: 'UPDATE_SELECTION', selection: data.result.title })\n        }} \n        onSearchChange = {handleSearchChange}\n        result={results}\n        value={value}\n        placeholder = \"Find users and groups!\"\n        size= {300}\n      /> */}\n\n      <Nav className=\"ml-auto\">\n        <LinkContainer to=\"/feed\">\n          <Nav.Link >\n          <div style={{ textAlign: \"center\", marginBottom: 2}}>\n            <TiHome size={25}/>\n          </div>\n          Home\n          </Nav.Link>\n        </LinkContainer>\n        <LinkContainer to=\"/feed\">\n          <Nav.Link >\n          <div style={{ textAlign: \"center\", marginBottom: 2}}>\n            <BiPaperPlane size={25}/>\n          </div>\n          Message\n          </Nav.Link>\n        </LinkContainer>\n        <LinkContainer to=\"/profile\" >\n        <Nav.Link>\n          <div style={{ textAlign: \"center\", marginBottom: 2}}>\n          <FaUserAlt style={{fontSize: 25}}/>\n          </div>\n          Profile\n          </Nav.Link>\n      </LinkContainer>\n      </Nav>\n    </Navbar>\n    <div style={{paddingTop: 120}}></div>\n  </div>\n  )\n\n}\n\n\n{/* <button onClick={this.handleLogout}>Logout</button> */}\n\nexport default NavBar;"]},"metadata":{},"sourceType":"module"}