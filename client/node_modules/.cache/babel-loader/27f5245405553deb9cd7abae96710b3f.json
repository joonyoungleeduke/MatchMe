{"ast":null,"code":"var _jsxFileName = \"/Users/joonyounglee/MITHACK/MITHack2020/client/src/Components/NewPost.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport axiosInstance from \"../User/axiosApi\";\nimport { Form } from 'semantic-ui-react';\nimport { useHistory } from \"react-router-dom\";\nimport { Modal, Button } from \"react-bootstrap\";\n\nfunction NewPost(props) {\n  let history = useHistory();\n\n  const handleClose = () => props.setShowPost(false);\n\n  const handleOpen = () => props.setShowPost(true);\n\n  const [options, setOptions] = useState([]);\n  const [form, setForm] = useState({\n    group: null,\n    content: \"\"\n  });\n  useEffect(() => {\n    parseOptions();\n  }, []);\n\n  async function parseOptions() {\n    var groups = await groupsFetch();\n    var options_arr = new Array();\n\n    for (let idx in groups) {\n      // this code makes no sense! :) but it works...\n      // console.log(group);\n      options_arr.push({\n        text: groups[idx].name,\n        value: groups[idx].id\n      });\n    }\n\n    console.log(options_arr);\n    setOptions(options_arr);\n  }\n\n  ;\n\n  async function groupsFetch() {\n    try {\n      var id = localStorage.getItem(\"user_id\");\n      const response = await axiosInstance.get('api/groups/user/' + id.toString() + \"/\");\n      return response.data;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  ;\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n\n    try {\n      const response = await axiosInstance.post('api/posts/create/', {\n        group: form.group,\n        content: form.content\n      });\n\n      if (response.status === 200) {\n        history.push('/');\n      }\n\n      console.log(response);\n      return response;\n    } catch (error) {\n      console.log(error.stack);\n    }\n  }\n\n  ;\n\n  function handleChange(event) {\n    const obj = { ...form\n    };\n    obj.content = event.target.value;\n    setForm(obj);\n  }\n\n  const handleSelectChange = (e, {\n    value\n  }) => {\n    const obj = { ...form\n    };\n    obj.group = value;\n    setForm(obj);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: props.showpost,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, \"New Post\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: e => handleSubmit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    widths: \"equal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Select, {\n    fluid: true,\n    label: \"Group\",\n    name: \"group\",\n    options: options,\n    placeholder: \"Group\" // value = {form.group}\n    ,\n    onChange: handleSelectChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Form.TextArea, {\n    name: \"content\",\n    label: \"Content\",\n    placeholder: \"Talk to the World!\",\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, \"Close\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: handleClose,\n    type: \"submit\",\n    value: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, \"Post\"))));\n} // <Modal show={show} onHide={handleClose}>\n// <Modal.Header closeButton>\n//   <Modal.Title>New Post</Modal.Title>\n// </Modal.Header>\n// <Modal.Body>\n//   <NewPost />\n// </Modal.Body>\n// <Modal.Footer>\n//   <Button variant=\"secondary\" onClick={handleClose}>\n//     Close\n//   </Button>\n//   <Button variant=\"primary\" onClick={handleClose}>\n//     Post\n//   </Button>\n// </Modal.Footer>\n// </Modal>\n\n\nexport default NewPost; // content = models.TextField(blank=False, default='')\n// hearts = models.ManyToManyField(User, blank=True, through=UserHeart, related_name='heart_user')\n// author = models.ForeignKey(User, on_delete=models.CASCADE, related_name='post')\n// group = models.ForeignKey(ActionGroup, on_delete=models.CASCADE, related_name='post')\n// created = models.DateTimeField(auto_now_add=True)\n// modified = models.DateTimeField(auto_now=True)\n// isMatch = models.BooleanField(blank=False, default=False)\n// matches = models.ManyToManyField(User, blank=True, through=UserMatch, related_name='match_user')\n// goal = models.IntegerField(\n//     default=10,\n//     validators=[\n//         MinValueValidator(10),\n//         MaxValueValidator(100000),\n//     ],\n// )\n// def __str__(self):\n//     return f'Post by {self.author} with {self.hearts} hearts'\n// class Meta: \n//     ordering = ['-created']\n// return (\n//     <div class=\"container justify-content-center align-items-center\">\n//         <div class=\"row justify-content-center\">\n//             <div class=\"col-md-6\" style={styles.register_form}>\n//                 <h3>Register</h3>\n//                 <form onSubmit={this.handleSubmit}>\n//                     <div class=\"form-group\">\n//                         <input type=\"username\" className=\"form-control\" placeholder=\"Username\" onChange={this.handleChange} value={this.state.username}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"First Name\" onChange={this.handleChange} value={this.state.first_name}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"Last Name\" onChange={this.handleChange} value={this.state.last_name}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"Email\" onChange={this.handleChange} value={this.state.email}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"Password\" onChange={this.handleChange} value={this.state.password}/>\n//                     </div>\n//                     <button type=\"submit\" value=\"submit\" className=\"btn btn-primary btn-block\">Sign Up</button>\n//                     <p className=\"forgot-password text-right\">\n//                         Already registered? <a href=\"/login\">Sign in</a>\n//                     </p>\n//                 </form>\n//             </div>\n//         </div>\n//     </div>    \n// )","map":{"version":3,"sources":["/Users/joonyounglee/MITHACK/MITHack2020/client/src/Components/NewPost.js"],"names":["React","Component","useState","useEffect","axiosInstance","Form","useHistory","Modal","Button","NewPost","props","history","handleClose","setShowPost","handleOpen","options","setOptions","form","setForm","group","content","parseOptions","groups","groupsFetch","options_arr","Array","idx","push","text","name","value","id","console","log","localStorage","getItem","response","get","toString","data","error","handleSubmit","event","preventDefault","post","status","stack","handleChange","obj","target","handleSelectChange","e","showpost"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport axiosInstance from \"../User/axiosApi\";\nimport { Form } from 'semantic-ui-react';\nimport { useHistory } from \"react-router-dom\";\nimport {Modal, Button} from \"react-bootstrap\";\n\nfunction NewPost(props) {\n\n    let history = useHistory();\n\n    const handleClose = () => props.setShowPost(false);\n    const handleOpen = () => props.setShowPost(true);\n\n    const[options, setOptions] = useState([]);\n    const[form, setForm] = useState({\n        group: null,\n        content: \"\",\n    });\n\n    useEffect(() => {\n        parseOptions()\n    }, []);   \n\n    async function parseOptions() {\n\n        var groups = await groupsFetch();\n\n        var options_arr = new Array();  \n\n        for (let idx in groups) { // this code makes no sense! :) but it works...\n            // console.log(group);\n            options_arr.push({\n                text: groups[idx].name, \n                value: groups[idx].id,\n            });\n        }\n\n        console.log(options_arr);\n\n        setOptions(options_arr);\n    };\n\n    async function groupsFetch() {\n        try {\n            var id = localStorage.getItem(\"user_id\");\n            const response = await axiosInstance.get('api/groups/user/' + id.toString() + \"/\");\n\n            return response.data;\n\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    async function handleSubmit(event) {\n        event.preventDefault();\n        try {\n            const response = await axiosInstance.post('api/posts/create/', {\n                group: form.group,\n                content: form.content,\n            });\n            if (response.status === 200) {\n                history.push('/');\n            }\n\n            console.log(response);\n\n            return response;\n        } catch (error) {\n            console.log(error.stack);\n        }\n    };\n\n    function handleChange(event) {\n        const obj = {...form};\n        obj.content = event.target.value;\n        setForm(obj);\n    }\n\n    const handleSelectChange = (e, { value }) => {\n        const obj = {...form};\n        obj.group = value; \n        setForm(obj);\n    }\n\n    return(\n        <div>\n            <Modal show={props.showpost} onHide={handleClose} />\n            <Modal.Header closeButton>\n                <Modal.Title>New Post</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form onSubmit={(e) => handleSubmit(e)}>\n                    <Form.Group widths='equal'>\n                        <Form.Select\n                            fluid \n                            label='Group'\n                            name='group'\n                            options={options}\n                            placeholder='Group'\n                            // value = {form.group}\n                            onChange = {handleSelectChange}\n                        />\n                    </Form.Group>\n                    <Form.TextArea name='content' label=\"Content\" placeholder=\"Talk to the World!\" onChange = {(e) => handleChange(e)}/>\n                    <Button variant=\"secondary\" onClick={handleClose}>Close</Button>\n                    <Button variant=\"primary\" onClick={handleClose} type=\"submit\" value=\"submit\">Post</Button>\n                    {/* <Form.Button onClick={handleClose}>Submit</Form.Button> */}\n                </Form>\n            </Modal.Body>\n        </div>\n    );\n}\n\n\n// <Modal show={show} onHide={handleClose}>\n// <Modal.Header closeButton>\n//   <Modal.Title>New Post</Modal.Title>\n// </Modal.Header>\n// <Modal.Body>\n\n\n//   <NewPost />\n\n\n// </Modal.Body>\n// <Modal.Footer>\n//   <Button variant=\"secondary\" onClick={handleClose}>\n//     Close\n//   </Button>\n//   <Button variant=\"primary\" onClick={handleClose}>\n//     Post\n//   </Button>\n// </Modal.Footer>\n// </Modal>\n\n\nexport default NewPost;\n\n// content = models.TextField(blank=False, default='')\n\n// hearts = models.ManyToManyField(User, blank=True, through=UserHeart, related_name='heart_user')\n\n// author = models.ForeignKey(User, on_delete=models.CASCADE, related_name='post')\n// group = models.ForeignKey(ActionGroup, on_delete=models.CASCADE, related_name='post')\n// created = models.DateTimeField(auto_now_add=True)\n// modified = models.DateTimeField(auto_now=True)\n\n// isMatch = models.BooleanField(blank=False, default=False)\n// matches = models.ManyToManyField(User, blank=True, through=UserMatch, related_name='match_user')\n// goal = models.IntegerField(\n//     default=10,\n//     validators=[\n//         MinValueValidator(10),\n//         MaxValueValidator(100000),\n//     ],\n// )\n\n// def __str__(self):\n//     return f'Post by {self.author} with {self.hearts} hearts'\n\n// class Meta: \n//     ordering = ['-created']\n\n// return (\n//     <div class=\"container justify-content-center align-items-center\">\n//         <div class=\"row justify-content-center\">\n//             <div class=\"col-md-6\" style={styles.register_form}>\n//                 <h3>Register</h3>\n//                 <form onSubmit={this.handleSubmit}>\n//                     <div class=\"form-group\">\n//                         <input type=\"username\" className=\"form-control\" placeholder=\"Username\" onChange={this.handleChange} value={this.state.username}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"First Name\" onChange={this.handleChange} value={this.state.first_name}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"Last Name\" onChange={this.handleChange} value={this.state.last_name}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"Email\" onChange={this.handleChange} value={this.state.email}/>\n//                     </div>\n//                     <div class=\"form-group\">\n//                         <input type=\"password\" className=\"form-control\" placeholder=\"Password\" onChange={this.handleChange} value={this.state.password}/>\n//                     </div>\n//                     <button type=\"submit\" value=\"submit\" className=\"btn btn-primary btn-block\">Sign Up</button>\n//                     <p className=\"forgot-password text-right\">\n//                         Already registered? <a href=\"/login\">Sign in</a>\n//                     </p>\n//                 </form>\n//             </div>\n//         </div>\n//     </div>    \n// )"]},"metadata":{},"sourceType":"module"}