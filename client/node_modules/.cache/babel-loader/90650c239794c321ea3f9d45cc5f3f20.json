{"ast":null,"code":"var _jsxFileName = \"/Users/joonyounglee/MITHACK/MITHack2020/client/src/Pages/IndPost.js\";\nimport React, { useState, useEffect, Text } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport NavBar from \"../Components/NavBar\";\nimport ParsePost from \"../APIComponents/ParsePost\";\nimport PostInfo from \"../APIComponents/PostInfo\";\nimport { Grid, Container, Header, Image, Label, Menu, Progress, Form, Button, Divider } from \"semantic-ui-react\";\nimport Comments from \"../Components/Comments\";\nimport SubmitMatch from \"../APIComponents/SubmitMatch\";\nimport RemoveMatch from \"../APIComponents/RemoveMatch\";\nimport UserInfo from \"../APIComponents/UserInfo\";\nimport ProfileInfo from \"../APIComponents/ProfileInfo\";\nimport GroupSuggestions from \"../APIComponents/GroupSuggestions\";\nimport SuggestedGroups from \"../Components/SuggestedGroups\";\nimport SimilarPostsComp from \"../Components/SimilarPostsComp\";\nimport SimilarPosts from \"../APIComponents/SimilarPosts\";\nimport ParsePosts from \"../APIComponents/ParsePosts\";\n\nconst IndPost = props => {\n  const [suggestions, setSuggestions] = useState([]);\n  const [similarPosts, setSimilarPosts] = useState([]);\n  const [showComments, setShowComments] = useState(false);\n  const [post, setPost] = useState({});\n  const [user, setUser] = useState({});\n  const [profile, setProfile] = useState({});\n  const [matched, setMatch] = React.useState(false);\n  const post_id = props.postID;\n  const user_id = localStorage.getItem('user_id');\n\n  async function getUser(user_id) {\n    let user = UserInfo(user_id);\n    user.then(data => {\n      setUser(data);\n    });\n  }\n\n  ;\n\n  async function getProfile(user_id) {\n    let profile = ProfileInfo(user_id);\n    profile.then(data => {\n      setProfile(data);\n    });\n  }\n\n  async function handleCreateMatch() {\n    let response = await SubmitMatch({\n      author: user_id,\n      match_post: post_id\n    });\n    console.log(user_id);\n    console.log(post_id);\n\n    if (response.status === 201) {\n      setMatch(true);\n    } else {\n      console.log(\"unsuccessful match\");\n      console.log(response.status);\n    }\n  }\n\n  async function handleRemoveMatch() {\n    let response = await RemoveMatch(post_id, user_id);\n\n    if (response.status === 204) {\n      setMatch(false);\n    } else {\n      console.log('unsuccessful unmatch');\n      console.log(response.status);\n    }\n  }\n\n  async function getSuggestions(user_id) {\n    let suggestions = GroupSuggestions(user_id);\n    suggestions.then(data => {\n      setSuggestions(data);\n    });\n  }\n\n  async function getSimilarPosts(group_id) {\n    let similars = await SimilarPosts(group_id, post_id);\n    similars = ParsePosts(similars);\n    similars.then(data => {\n      setSimilarPosts(data);\n    });\n  }\n\n  const handleMatch = () => {\n    if (matched) {\n      handleRemoveMatch();\n    } else {\n      handleCreateMatch();\n    }\n  };\n\n  const handleShowComments = () => {\n    setShowComments(true);\n  };\n\n  const handleHideComments = () => {\n    setShowComments(false);\n  };\n\n  useEffect(() => {\n    getPost();\n    getUser(user_id);\n    getProfile(user_id);\n    getSuggestions(user_id);\n  }, {});\n\n  async function getPost() {\n    let data = await PostInfo(post_id);\n    data = await ParsePost(data, user_id);\n    setPost(data);\n    setMatch(data.matched);\n    console.log(data);\n    getSimilarPosts(data.group.id);\n  }\n\n  if (post.isMatch) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Grid, {\n      centered: true,\n      columns: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        left: -50\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      text: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Label, {\n      as: \"a\",\n      color: \"blue\",\n      ribbon: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }, post.group.theme), /*#__PURE__*/React.createElement(Header, {\n      as: \"h1\",\n      style: {\n        fontSize: '5em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, post.group.name), /*#__PURE__*/React.createElement(Header, {\n      as: \"h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    }, \"Match \", post.author.first_name, \"'s lead.\"))), /*#__PURE__*/React.createElement(Grid.Row, {\n      centered: true,\n      columns: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      attached: \"top\",\n      tabular: true,\n      fluid: true,\n      widths: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Menu.Item, {\n      name: \"action\",\n      active: !showComments,\n      onClick: handleHideComments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Menu.Item, {\n      name: \"comments\",\n      active: showComments,\n      onClick: handleShowComments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(Grid.Row, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      text: true,\n      style: {\n        display: showComments ? \"none\" : \"\",\n        margin: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 45\n      }\n    }, \"Here's what I did.\"), /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 45\n      }\n    }, post.content), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 45\n      }\n    }, \"Why should you care?\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 45\n      }\n    }, post.reason)), /*#__PURE__*/React.createElement(Container, {\n      text: true,\n      style: {\n        display: showComments ? \"\" : \"none\",\n        margin: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Comments, {\n      comments: post.comments,\n      visible: showComments,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 37\n      }\n    })))), /*#__PURE__*/React.createElement(Grid.Column, {\n      centered: true,\n      style: {\n        marginLeft: \"30px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, \"Contribute to \", post.group.name, \"'s impact.\"), /*#__PURE__*/React.createElement(\"h5\", {\n      style: {\n        fontWeight: \"bold\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 29\n      }\n    }, \"Help get to \", post.goal, \" matches.\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Progress, {\n      percent: (post.matches / post.goal * 100).toFixed(3),\n      color: \"blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 29\n      }\n    }), post.matched ? /*#__PURE__*/React.createElement(Container, {\n      text: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h1\",\n      style: {\n        fontSize: '3em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 33\n      }\n    }, \"Thank you for contributing.\")) : /*#__PURE__*/React.createElement(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 37\n      }\n    }, \"Enter your name to confirm.\"), /*#__PURE__*/React.createElement(Form.Input, {\n      placeholder: \"First Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      placeholder: \"Last Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Form.Button, {\n      onClick: handleMatch,\n      fluid: true,\n      basic: true,\n      color: \"blue\",\n      icon: \"handshake outline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 37\n      }\n    })))), /*#__PURE__*/React.createElement(Grid.Row, {\n      centered: true,\n      columns: 4,\n      style: {\n        marginTop: \"100px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h1\",\n      style: {\n        fontSize: '4em'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 33\n      }\n    }, \"Take more action.\"), /*#__PURE__*/React.createElement(Header, {\n      as: \"h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Grid.Row, {\n      centered: true,\n      columns: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        padding: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(SuggestedGroups, {\n      groups: suggestions,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        padding: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(SimilarPostsComp, {\n      posts: similarPosts,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 37\n      }\n    })))))));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 13\n      }\n    }, \"under construction\");\n  }\n};\n\nexport default IndPost;\n{\n  /* <Card.Content extra>\n  <List horizontal selection>\n  <Popup content='Like' basic trigger={\n     <List.Item\n         onClick={handleHeart}\n     >\n          <List.Icon \n         name={hearted ? \"heart\" : \"heart outline\"}\n         size=\"large\"\n         label={{as: 'a', corner: 'left', value: props.post.hearts}}\n         >\n          </List.Icon>\n      </List.Item>\n  } /> */\n}","map":{"version":3,"sources":["/Users/joonyounglee/MITHACK/MITHack2020/client/src/Pages/IndPost.js"],"names":["React","useState","useEffect","Text","useParams","NavBar","ParsePost","PostInfo","Grid","Container","Header","Image","Label","Menu","Progress","Form","Button","Divider","Comments","SubmitMatch","RemoveMatch","UserInfo","ProfileInfo","GroupSuggestions","SuggestedGroups","SimilarPostsComp","SimilarPosts","ParsePosts","IndPost","props","suggestions","setSuggestions","similarPosts","setSimilarPosts","showComments","setShowComments","post","setPost","user","setUser","profile","setProfile","matched","setMatch","post_id","postID","user_id","localStorage","getItem","getUser","then","data","getProfile","handleCreateMatch","response","author","match_post","console","log","status","handleRemoveMatch","getSuggestions","getSimilarPosts","group_id","similars","handleMatch","handleShowComments","handleHideComments","getPost","group","id","isMatch","left","theme","fontSize","name","first_name","display","margin","fontWeight","content","reason","comments","marginLeft","goal","matches","toFixed","marginTop","padding"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, Text} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport NavBar from \"../Components/NavBar\";\nimport ParsePost from \"../APIComponents/ParsePost\";\nimport PostInfo from \"../APIComponents/PostInfo\";\nimport {Grid, Container, Header, Image, Label, Menu, Progress, Form, Button, Divider} from \"semantic-ui-react\";\nimport Comments from \"../Components/Comments\";\nimport SubmitMatch from \"../APIComponents/SubmitMatch\";\nimport RemoveMatch from \"../APIComponents/RemoveMatch\";\nimport UserInfo from \"../APIComponents/UserInfo\";\nimport ProfileInfo from \"../APIComponents/ProfileInfo\";\nimport GroupSuggestions from \"../APIComponents/GroupSuggestions\";\nimport SuggestedGroups from \"../Components/SuggestedGroups\";\nimport SimilarPostsComp from \"../Components/SimilarPostsComp\";\nimport SimilarPosts from \"../APIComponents/SimilarPosts\";\nimport ParsePosts from \"../APIComponents/ParsePosts\";\n\nconst IndPost = (props) => {\n\n    const [suggestions, setSuggestions] = useState([]);\n    const [similarPosts, setSimilarPosts] = useState([]);\n\n    const [showComments, setShowComments] = useState(false);\n    const [post, setPost] = useState({});\n    const [user, setUser] = useState({});\n    const [profile, setProfile] = useState({});\n\n    const [matched, setMatch] = React.useState(false);\n        \n    const post_id = props.postID;\n\n    const user_id = localStorage.getItem('user_id');\n\n    async function getUser(user_id) {\n        let user = UserInfo(user_id);\n    \n        user.then(data => {\n          setUser(data);\n        })\n      };\n    \n      async function getProfile(user_id) {\n        let profile = ProfileInfo(user_id);\n    \n        profile.then(data => {\n          setProfile(data);\n        })\n      }\n\n    async function handleCreateMatch() {\n        let response = await SubmitMatch({\n            author: user_id, \n            match_post: post_id, \n        })\n\n        console.log(user_id);\n        console.log(post_id);\n\n        if (response.status === 201) {\n            setMatch(true);\n        } else {\n            console.log(\"unsuccessful match\");\n            console.log(response.status);\n        }\n    }\n\n    async function handleRemoveMatch() {\n        let response = await RemoveMatch(post_id, user_id);\n\n        if (response.status === 204) {\n            setMatch(false); \n        } else {\n            console.log('unsuccessful unmatch');\n            console.log(response.status);\n        }\n    }\n\n    async function getSuggestions(user_id) {\n        let suggestions = GroupSuggestions(user_id);\n        suggestions.then(data => {\n          setSuggestions(data);\n        })\n    \n      }\n    \n\n\n    async function getSimilarPosts(group_id) {\n        let similars = await SimilarPosts(group_id, post_id); \n        similars = ParsePosts(similars);\n        similars.then(data => {\n            setSimilarPosts(data);\n        })\n    }\n\n\n\n    const handleMatch = () => {\n        if (matched) {\n            handleRemoveMatch();\n        } else {\n            handleCreateMatch();\n        }\n    }\n\n\n\n    const handleShowComments = () => {\n        setShowComments(true);\n    }\n\n    const handleHideComments = () => {\n        setShowComments(false);\n    }\n\n    useEffect(() => {\n        getPost();\n        getUser(user_id);\n        getProfile(user_id);\n        getSuggestions(user_id);\n    }, {});\n\n    async function getPost() {\n        let data = await PostInfo(post_id);\n        data = await ParsePost(data, user_id);\n        setPost(data);\n        setMatch(data.matched);\n        console.log(data);\n        getSimilarPosts(data.group.id);\n    }\n    if (post.isMatch) {\n        return(\n            <div>\n                <NavBar />\n                <Grid centered columns={2}>\n                    <Grid.Column style={{left: -50}}>\n                        <Container text>\n                            <Label as='a' color='blue' ribbon>\n                                {post.group.theme}\n                            </Label>\n                            <Header as ='h1' style={{fontSize: '5em'}}>\n                                {post.group.name}\n                            </Header>\n                            <Header as='h1'>\n                                Match {post.author.first_name}'s lead.\n                            </Header>\n                        </Container>\n                    </Grid.Column>\n                    <Grid.Row centered columns={4}>\n                        <Grid.Column>\n                            <Grid.Row>\n                                <Menu attached='top' tabular fluid widths={2}>\n                                    <Menu.Item\n                                        name='action'\n                                        active={!showComments}\n                                        onClick={handleHideComments}\n                                    >\n                                    </Menu.Item>\n                                    <Menu.Item\n                                        name='comments'\n                                        active={showComments}\n                                        onClick={handleShowComments}\n                                    >\n                                    </Menu.Item>\n                                </Menu>\n                            </Grid.Row>\n                            <Grid.Row fluid>\n                                <Container text style={{display: showComments ? \"none\" : \"\", margin: \"20px\"}}>\n                                            <h2 style={{fontWeight: \"bold\"}}>\n                                                Here's what I did.\n                                            </h2>\n                                            <h5>\n                                                {post.content}\n                                            </h5>\n                                            <br></br>\n                                            <h3 style={{fontWeight: \"bold\"}}>\n                                                Why should you care?\n                                            </h3>\n                                            <p>\n                                                {post.reason}\n                                            </p>\n                                </Container>\n                                <Container text style={{display: showComments ? \"\" : \"none\", margin: \"20px\"}}>\n                                    <Comments comments={post.comments} visible={showComments} />\n                                </Container>\n                            </Grid.Row>\n                        </Grid.Column>\n\n                        <Grid.Column centered style={{marginLeft: \"30px\"}}>\n                            <h5>\n                                Contribute to {post.group.name}'s impact.\n                            </h5>\n                            <h5 style={{fontWeight: \"bold\"}}>\n                                Help get to {post.goal} matches.\n                            </h5>\n                            <br></br>\n                            <Progress percent={((post.matches / post.goal) * 100).toFixed(3)} color=\"blue\"/>\n                            {/* <h5 style={{fontWeight: 'bold'}}>\n                                Help get to {post.goal}.\n                            </h5> */}\n                            <br></br>\n                            {post.matched ? \n\n                                <Container text>\n                                <Header as ='h1' style={{fontSize: '3em'}}>\n                                    Thank you for contributing. \n                                </Header>\n                                \n                                </Container>\n\n                                :\n\n                                <Form>\n                                    <Header>\n                                        Enter your name to confirm.\n                                    </Header>\n                                    <Form.Input placeholder='First Name' />\n                                    <Form.Input placeholder='Last Name' />\n                                        \n                                    <Form.Button\n                                    onClick={handleMatch}\n                                    fluid \n                                    basic \n                                    color='blue'\n                                    icon='handshake outline'\n                                    />                         \n                                    \n                                </Form>\n                        }\n\n     \n                        </Grid.Column>\n                    </Grid.Row>\n\n                    <Grid.Row centered columns={4} style={{marginTop: \"100px\"}}>\n                        <Grid.Column>\n                            <Container>\n                                <Header as ='h1' style={{fontSize: '4em'}}>\n                                    Take more action.\n                                </Header>\n                                <Header as='h1'>\n                                </Header>\n                            </Container>\n                            <Grid.Row centered columns={2}>\n                                <Grid.Column style={{padding: \"10px\"}}>\n                                    <SuggestedGroups groups={suggestions} />\n                                </Grid.Column>\n\n                                <Grid.Column style={{padding: \"10px\"}}>\n                                    <SimilarPostsComp posts={similarPosts} />\n                                </Grid.Column>\n                            </Grid.Row>\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n\n            </div>\n        )\n    } else {\n        return(\n            <div>\n                under construction\n            </div>\n        )\n    }\n\n}\n\nexport default IndPost;\n\n{/* <Card.Content extra>\n<List horizontal selection>\n<Popup content='Like' basic trigger={\n    <List.Item\n        onClick={handleHeart}\n    >\n\n        <List.Icon \n        name={hearted ? \"heart\" : \"heart outline\"}\n        size=\"large\"\n        label={{as: 'a', corner: 'left', value: props.post.hearts}}\n        >\n\n        </List.Icon>\n\n    </List.Item>\n} /> */}"]},"metadata":{},"sourceType":"module"}